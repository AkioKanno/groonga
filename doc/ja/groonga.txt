groonga manual(v0.1.4)
                                  groonga (実行ファイル)

■名前

 groonga - 列指向データベース機能を持つ全文検索エンジンソフトウェア

■書式

 groonga [options] [dest] [command [args]]

■説明

 groongaは列指向のデータベース機能を持つ高速でスケーラブルな全文検索エンジンです。
 groongaのデータベースは、groonga実行ファイルかCライブラリインタフェースを通して操作す
 ることができます。このマニュアルページでは、groonga実行ファイルの使い方について説明し
 ます。

■オプション

 -n
   新たなデータベースを作成します。

 -a
   スタンドアロンモードで実行します(デフォルト)。

 -c
   クライアントモードで実行します。

 -s
   サーバモードで実行します。

 -d
   デーモンモードで実行します。(forkする点がサーバモードと異なる)

 -e <encoding>
   データベースで使用する文字エンコーディング方式を指定します。新たなデータベースを作成
   する時のみ有効です。none, euc, utf8, sjis, latin, koi8rのいずれかが指定できます。

 -l <log level>
   ログレベルを指定します。0〜8までの数値が指定可能で、数が大きいほど多くのログが出力さ
   れます。

 -i <ip/hostname>
   サーバモードかデーモンモードで実行するとき、listenするアドレスを指定します。
   (デフォルトは`hostname`の返すホスト名)

 -p <port number>
   クライアント、サーバ、またはデーモンモードで使用するTCPポート番号。
   (デフォルトは10041番)

 -h, --help
   ヘルプメッセージを出力します。

 --admin-html-path <path>
   httpサーバとしてgroongaを使用する場合に静的ページを格納するディレクトリを指定します。
   デフォルトでは、データベースを管理するための汎用的なページに対応するファイルが
   /usr/share/groonga/admin_html以下にインストールされます。このディレクトリを
   admin-html-pathオプションの値に指定して起動した場合、ウェブブラウザで
   http://hostname:port/index.htmlにアクセスすると、ウェブベースのデータベース管理ツー
   ルを使用できます。

 --protocol <protocol>
   http,gqtpのいずれかを指定します。(デフォルトはgqtp)

■引数

 dest
   使用するデータベースのパス名を指定します。クライアントモードの場合は接続先のホスト名
   を指定します(デフォルト値は'localhost')。

 command [args]
   スタンドアロンおよびクライアントモードの場合は、実行するコマンドとその引数をコマンド
   ライン引数に指定できます。コマンドライン引数にcommandを与えなかった場合は、標準入力
   から一行ずつEOFに達するまでコマンド文字列を読み取り、順次実行します。

■コマンド

 groonga実行ファイルを通してデータベースを操作する命令をコマンドと呼びます。コマンドは
 主にC言語で記述され、groongaプロセスにロードすることによって使用できるようになります。
 それぞれのコマンドは一意な名前と、0個以上の引数を持ちます。

 引数は以下の2種類の方法のいずれかで指定することができます。

 形式1: コマンド名 値1 値2,..

 形式2: コマンド名 --引数名1 値1 --引数名2 値2,..

 形式1でコマンドを実行する場合は、定義された順番で値を指定しなければならず、途中の引数
 の値を省略することはできません。形式2でコマンドを実行する場合は、「--引数名」のように
 引数の名前を明示しなければならない代わりに、任意の順番で引数を指定することが可能で、途
 中の引数の指定を省略することもできます。

 標準入力からコマンド文字列を与える場合は、コマンド名と引数名と値は、空白( )で区切りま
 す。空白を含む値を指定したい場合は、シングルクォート(')かダブルクォート(")で値を囲みま
 す。値として指定する文字列の中では、改行文字は'\n'に置き換えて指定します。また、引用符
 に使用した文字を値の中で指定する場合には、その文字の前にバックスラッシュ('\') を指定し
 ます。バックスラッシュ文字自身を値として指定する場合には、その前にバックスラッシュを指
 定します。

■組み込みコマンド

 以下のコマンドは組み込みコマンドとして予め定義されています。

 status
   groongaプロセスの状態を表示します。

 table_list
   DBに定義されているテーブルのリストを表示します。

 column_list
   テーブルに定義されているカラムのリストを表示します。

 table_create
   DBにテーブルを追加します。

 column_create
   テーブルにカラムを追加します。

 view_add
   VIEW型のテーブルに要素となるテーブルを定義します。

 load
   テーブルにレコードを挿入します。

 select
   テーブルに含まれるレコードを検索して表示します。

 define_selector
   検索条件をカスタマイズした新たな検索コマンドを定義します。

 quit
   データベースとのセッションを終了します。

 shutdown
   サーバ(デーモン)プロセスを停止します。

 log_level
   ログ出力レベルを設定します。

 log_put
   ログ出力を行います。

■例

 新しいデータベースを作成します。

   % groonga -n /tmp/hoge.db quit
   %

 作成済みのデータベースにテーブルを定義します。

   % groonga /tmp/hoge.db table_create Table 0 ShortText
   [[0]]
   %

 サーバを起動します。

   % groonga -d /tmp/hoge.db
   %

 httpサーバとして起動します。

   % groonga -d -p 80 --protocol http --admin-html-path /usr/share/groonga/admin_html /tmp/hoge.db
   %

 サーバに接続し、テーブル一覧を表示します。

   % groonga -c localhost table_list
   [[0],[["id","name","path","flags","domain"],[256,"Table","/tmp/hoge.db.0000100",49152,14]]]
   %
