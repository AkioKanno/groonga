.. -*- rst -*-

.. highlightlang:: none

groonga-httpd
=============

Summary
-------

groonga-httpd is an HTTP groonga server. It functions as same as groonga-http.
The difference is that groonga-httpd processes HTTP requests by embedded nginx.
On the other hand, groonga-http does by a minimal built-in HTTP server. All
standards-compilicance and features provided by nginx is also available in
groonga-httpd. For details about nginx, see http://www.nginx.org/

groonga-httpdにはHTML + JavaScriptで実装された管理ツールが標準で付属しています。ウェブブラウザでhttp://hostname:port/にアクセスすると、管理ツールを利用できます。

Synopsis
--------

::

 groonga-httpd [nginx options]

Usage
-----

First, you'll need to edit the configuration file for groonga-httpd to specify
database. Edit /etc/groonga/httpd/groonga-httpd.conf to enable
groonga_database directive like this::

   location /d/ {
     groonga;
     groonga_database /var/lib/groonga/db/db; # <= Specify actual database and
                                              #    enable this directive
   }

Then, run groonga-httpd. Note that the control immediately returns back to the
console because groonga-httpd runs as a daemon process by default.::

   % groonga-httpd

To check, request a simple query.::

   % curl -s http://localhost:10041/d/status | python -m json.tool
   [
       [
           0,
           1340331537.24441,
           5.17368316650391e-05
       ],
       {
           "alloc_count": 125,
           "cache_hit_rate": 0.0,
           "command_version": 1,
           "default_command_version": 1,
           "max_command_version": 2,
           "n_queries": 0,
           "starttime": 1340331494,
           "uptime": 43,
           "version": "2.0.3-278-g6071d65"
       }
   ]


Also, you can browse Web-based adiministration tool at http://localhost:10041/.

Finally, to terminate the running groonga-httpd daemon, run this::

   % groonga-httpd -s stop

Configuration directives
------------------------

The following directives can be used in the configuration file of groonga-httpd.
By default, it's located at /etc/groonga/httpd/groonga-httpd.conf.

Groonga-specific directives
^^^^^^^^^^^^^^^^^^^^^^^^^^^

The following directives aren't provided by nginx. They are provided by
groonga-httpd to configure groonga-httpd-specific directives.

``groonga_database``
""""""""""""""""""""

Specifies the path to a groonga database.

Performance-related directives
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The following directives are related to performance.

``worker_processess``
"""""""""""""""""""""

For optimum performance, set this to be equal to the number of CPUs or cores. In
many cases, groonga queries may be CPU-intensive work, so to fully utilize
multi-CPU/core systems, it's essential to set this accordingly.

This isn't a groonga-httpd specific directive, but an nginx's one. For details,
see http://wiki.nginx.org/CoreModule#worker_processes.

By default, this is set to 1. It is nginx's default.
