.. -*- rst -*-

.. highlightlang:: none

.. groonga-include : introduction.txt

How to use groonga with network
===============================

You can use groonga with network. When you run groonga by using the groonga's own protocol or HTTP, groonga accepts connection for network.

Connection by groonga's own protocol
---------------------------------------

Run groonga daemon
^^^^^^^^^^^^^^^^^^

form ::

  groonga [-p port_number] -d DB_pathname

The DB_pathname is set the full-path of existed-database.
With this form, you can run groonga as daemon and connect by groonga's own protocol with port_number.
(The port_number is 10041 when you don't specify port_number.)

execution example::

  % groonga -d /tmp/groonga-databases/introduction.db
  12345
  %

After groonga is run as daemon, show its pid.

Connection with groonga server
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

form ::

  groonga [-p port_number] -c [host_name or IP_address]

This command connect groonga server running at specified host_name or IP_address.

When you don't specify host_name, this command connect at localhost. When you don't specify post_number, it is 10041.

You can use interactive-mode after connection is succeeded.
Groonga in interactive-mode runs commands input in standard-input.

.. groonga-command
.. include:: ../example/tutorial/network-1.log
.. .. % groonga -c
.. status
.. .. > ctrl-d
.. .. %

Terminate groonga daemon
^^^^^^^^^^^^^^^^^^^^^^^^

You can terminate groonga daemon with shutdown command.

.. groonga-command
.. include:: ../example/tutorial/network-2.log
.. .. % groonga -c
.. .. > shutdown
.. .. %

Connection by HTTP
------------------

If you use groonga by HTTP connection, you run groonga as HTTP-protocol-mode with this command.

form ::

  groonga [-p port_number] -d --protocol http DB_pathname

With option of "--protocol" you can specify protocol accepted by groonga.
If you specify http for this option, groonga accept connection with HTTP-protocol.

HTML management
^^^^^^^^^^^^^^^

After the above command is run, you can look at HTML-management tool when you access "http://[host_name or IP_address]:[port_number]/" in your favorite browser.
You need to accept JavaScript running in your browser.

Run command with HTTP
^^^^^^^^^^^^^^^^^^^^^

When groonga is run by HTTP protocol mode, you can run command by access of the url of "/d/command-name".

You specify option of command as GET parametor of HTTP, in a word a form of any command with option is "?option=value&option=value ...".

.. groonga-command
.. include:: ../example/tutorial/network-3.log
.. .. http://[host_name or IP_address]:[port_nuber]/d/status
.. .. execute routine：
.. status
.. .. 
.. .. http://[host_name or IP_address]:[port_nuber]/d/select?table=Site&query=title:@this
.. .. executed routine：
.. select --table Site --query title:@this


Security
--------

Network service of groonga doesn't have cirtification. Everyone can view and modify the databace. So we reccomend restriction for access from the IP-address with iptables.
