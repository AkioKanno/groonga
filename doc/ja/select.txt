groonga manual(v0.1.4)
                               select (組込コマンド)


- 検索

 selectコマンドを使用します。

 書式: select table match_column query filter foreach sortby output_columns offset limit

 検索対象のテーブルをtableに指定します。
 デフォルトの検索対象カラムをmatch_columnに指定します。
 query, filterには検索条件を表すクエリ文字列を指定します。
 foreachには、検索条件にマッチした全レコードに適用されるクエリ文字列を指定します。
 sortbyにはソート条件文字列を指定します。ソート条件文字列は、以下のような形式です。

  [-]カラム名1 [-]カラム名2 [-]カラム名3...

 カラム名1の値でソートし、値が同一である場合はカラム名2で、と順次比較を行います。
 カラム名の前に - を付加した場合は降順にソートします。(付加しない場合は昇順です)

 output_columnsには出力するカラム名のリストを指定します。
 offsetとlimitに出力するレコードの範囲(開始行と出力行数)を指定します。
 指定範囲のレコードの対象のカラムの値がjson形式で出力されます。

 また、上記に加えて以下のドリルダウン条件パラメータを指定することもできます。

 drilldown drilldown_sortby drilldown_output_columns drilldown_offset drilldown_limit

- クエリ文字列の書式

 groongaのクエリ文字列には2種類の書式があります。

 書式1: 以下の書式が指定できます。

  文字列         : 全文検索 (match_columnパラメータに指定したカラムに対して全文検索を実行する)

  "文字列"       : フレーズサーチ(match_columnパラメータに指定したカラムに対してフレーズ検索を実行する)

  カラム名:値    : カラム検索条件(カラム値 == 値)

  カラム名:!値   : カラム検索条件(カラム値 != 値)

  カラム名:<値   : カラム検索条件(カラム値 < 値)

  カラム名:>値   : カラム検索条件(カラム値 > 値)

  カラム名:<=値  : カラム検索条件(カラム値 <= 値)

  カラム名:>=値  : カラム検索条件(カラム値 >= 値)

  カラム名:%値   : カラム検索条件(カラム値 が指定した値を含んでいる)

  a OR b         : aとbとどちらかの条件がマッチする

  a + b          : aとbの両方がマッチする(デフォルト)

  a - b          : aにマッチし、bにはマッチしない

  ( )            : 複数の条件をまとめる

 書式2: 以下の書式が指定できます。

  文字列         : カラム名、変数名などのシンボル

  "文字列"       : 文字列リテラル

  数値           : 数値リテラル

  値1 比較演算子 値2
                 : 値1と値2を比較します。(値にはカラム、リテラル、関数式が指定可能)
                   比較演算子は <, <=, >, >=, == が使用可能

  値1 論理演算子 値2
                 : 論理演算子は &&, ||が使用可能

  左辺値 代入演算子 式
                 : 代入演算子は =, +=, -=, *=, /=が使用可能

  関数名(引数1,引数2,..)
                 : 関数呼び出し

 selectコマンドのqueryパラメータには書式1を、filterおよびforeachパラメータには書式2を指定します。

