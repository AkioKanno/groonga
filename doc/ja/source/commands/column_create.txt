.. highlightlang:: none

column_create
=============

名前
----

column_create - カラムの追加

書式
----
::

 column_create table name flags type [source [output_type]]

説明
----

groonga組込コマンドの一つであるcolumn_createについて説明します。組込コマンドは、groonga実行ファイルの引数、標準入力、またはソケット経由でgroongaサーバにリクエストを送信することによって実行します。

column_createは、使用しているデータベースのテーブルに対してカラムを追加します。

引数
----

``table``

  カラムを追加するテーブルの名前を指定します。

``name``

  作成するカラムの名前を指定します。カラム名は、テーブルの中で一意でなければなりません。

  ピリオド('.'), コロン(':')を含む名前のカラムは作成できません。また、アンダースコア('_')で始まる名前は予約済みであり、使用できません。

``flags``

  カラムの属性を表す以下の数値か、パイプ('|')で組み合わせたシンボル名を指定します。

  0, ``COLUMN_SCALAR``
    単一の値が格納できるカラムを作成します。
  1, ``COLUMN_VECTOR``
    複数の値の配列を格納できるカラムを作成します。
  2, ``COLUMN_INDEX``
    インデックス型のカラムを作成します。

  インデックス型のカラムについては、flagsの値に以下の値を加えることによって、追加の属
  性を指定することができます。

  128, ``WITH_SECTION``
    段落情報を格納するインデックスを作成します。

  256, ``WITH_WEIGHT``
    ウェイト情報を格納するインデックスを作成します。

  512, ``WITH_POSITION``
    位置情報を格納するインデックス(完全転置インデックス)を作成します。

``type``

  値の型を指定します。groongaの組込型か、同一データベースに定義済みのユーザ定義型、定義済みのテーブルを指定することができます。

``source``

  インデックス型のカラムを作成した場合は、インデックス対象となるカラムをsource引数に指定します。

``output_type``

  出力形式を、json,tsv,xmlのいずれかで指定します。

返値
----

以下のようなjson形式で値が返却されます。 [#]_

::

 [[リターンコード, 処理開始時間, 処理時間]]

``リターンコード``

  grn_rcに対応する数値が返されます。0(GRN_SUCCESS)以外の場合は、続いてエラー内容を示す
  文字列が返されます。

``処理開始時間``

  処理を開始した時間について、1970年1月1日0時0分0秒を起点とした秒数を小数で返します。

``処理時間``

  処理にかかった秒数を返します。

例
--

テーブルEntryに、ShortText型の値を格納するカラム、bodyを作成します。::

  column_create Entry body --type ShortText --output_type json
  [[0,1268211414.42214,0.039489]]

テーブルTermに、Entryテーブルのbodyカラムの値を対象とする完全転置インデックス型カラム、entry_bodyを作成します。::

  column_create Term entry_body 514 Entry body --output_type json
  [[0,1268211445.26988,0.155751]]

  column_create Term entry_body COLUMN_INDEX|WITH_POSITION Entry body --output_type json
  [[0,1268211448.73713,0.18734]]

.. rubric:: 脚注

.. [#] tsv,xml出力はv1.0でサポートされます。また、処理開始時間・処理時間については正確でない場合があります。
